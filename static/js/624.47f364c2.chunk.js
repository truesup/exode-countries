"use strict";(self.webpackChunkexode_countries=self.webpackChunkexode_countries||[]).push([[624],{8624:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var r,o,i,s,c=t(5895),l=t(3089),a=t(172),d=t(2097),u=t(4799),h=t(9302),x=t(4082),g=t(5043),m=t(7528),p=t(459);const j=(0,p.J1)(r||(r=(0,m.A)(["\n  fragment CountryFields on Country {\n    code\n    name\n    phone\n    capital\n    currency\n    languages {\n      native\n    }\n    continent {\n      name\n    }\n    emoji\n  }\n"]))),v=(0,p.J1)(o||(o=(0,m.A)(["\n  query GetCountries {\n    countries {\n      ...CountryFields\n    }\n  }\n  ","\n"])),j),f=(0,p.J1)(i||(i=(0,m.A)(["\n  query GetCountriesByName($name: StringQueryOperatorInput) {\n    countries(filter: { name: $name }) {\n      ...CountryFields\n    }\n  }\n  ","\n"])),j),A=(0,p.J1)(s||(s=(0,m.A)(["\n  query GetCountriesByCode($code: StringQueryOperatorInput) {\n    countries(filter: { code: $code }) {\n      ...CountryFields\n    }\n  }\n  ","\n"])),j);var y=t(298),w=t(267),b=t(1244),C=t(7240),S=t(6128),k=t(5156),E=t(4309),I=t(2327),L=t(3241),M=t(8295),B=t(6035),z=t(579);const R=e=>{let{icon:n,text:t}=e;return(0,z.jsxs)(y.A,{direction:"row",spacing:1,alignItems:"center",children:[n,(0,z.jsx)(c.A,{variant:"body1",children:t||"Not found"})]})},$=(e,n)=>{if(e.length<=n)return e;const t=e.split(" ");let r="";for(const o of t){if((r+" "+o).trim().length>n)break;r+=(r?" ":"")+o}return r.trim()+"..."},D=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e.length<=n?e.join("/"):"".concat(e.slice(0,n).join("/"),"...")},F=e=>{let{flag:n,name:t,continent:r,code:o,capital:i,phone:s,currency:l,languages:a}=e;const d=(0,w.A)(),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:900;const[n,t]=(0,g.useState)("undefined"===typeof window||window.innerWidth>e);return(0,g.useEffect)(()=>{const n=()=>t(window.innerWidth>e);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),n}();return(0,z.jsxs)(b.A,{sx:{width:"100%",backgroundColor:"white",borderRadius:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,z.jsx)(C.A,{title:(0,z.jsxs)(c.A,{variant:"h2",component:"div",title:"".concat(n," ").concat(t),children:[n," ",u?$(t,22):t]}),sx:{borderBottom:"1px solid ".concat(d.palette.divider),pb:1,mb:1}}),(0,z.jsx)(S.A,{sx:{pt:0},children:(0,z.jsxs)(y.A,{spacing:1.2,children:[(0,z.jsx)(R,{icon:(0,z.jsx)(k.A,{sx:{color:"gray"}}),text:r}),(0,z.jsx)(R,{icon:(0,z.jsx)(E.A,{sx:{color:"gray"}}),text:i}),(0,z.jsx)(R,{icon:(0,z.jsx)(I.A,{sx:{color:"gray"}}),text:o}),(0,z.jsx)(R,{icon:(0,z.jsx)(L.A,{sx:{color:"gray"}}),text:s&&"+".concat(s)}),(0,z.jsx)(R,{icon:(0,z.jsx)(M.A,{sx:{color:"gray"}}),text:l}),(0,z.jsx)(R,{icon:(0,z.jsx)(B.A,{sx:{color:"gray"}}),text:(0,z.jsx)("span",{title:a.join(" / "),children:D(a)})})]})})]})},H=e=>{let{searchMode:n,searchData:t,searchLoading:r,searchError:o,hasSearchBeenSubmitted:i}=e;const[s,m]=(0,g.useState)(9),[p,j]=(0,g.useState)(!1),f=(0,g.useRef)(null),{data:A,loading:y,error:w,refetch:b}=(0,x.IT)(v),C=(0,g.useMemo)(()=>{var e,r;return n&&i?null!==(e=null===t||void 0===t?void 0:t.countries)&&void 0!==e?e:[]:null!==(r=null===A||void 0===A?void 0:A.countries)&&void 0!==r?r:[]},[n,i,t,A]),S=(0,g.useCallback)(()=>{const e=f.current;if(!e||p)return;const{scrollTop:n,scrollHeight:t,clientHeight:r}=e;n+r>=t-200&&s<C.length&&(j(!0),setTimeout(()=>{m(e=>Math.min(e+6,C.length)),j(!1)},250))},[p,s,C.length]);(0,g.useEffect)(()=>{const e=f.current;if(e)return e.addEventListener("scroll",S),()=>e.removeEventListener("scroll",S)},[S]);const k=r||y,E=o||w;return(0,z.jsx)(u.A,{component:"section",elevation:3,ref:f,sx:{p:2,width:"100%",height:"100%",borderRadius:2,backgroundColor:"rgba(20, 28, 48, 0.95)",overflowY:"scroll",position:k?"relative":"static"},children:k?(0,z.jsx)(l.A,{container:!0,justifyContent:"center",alignItems:"center",sx:{height:"100%"},children:(0,z.jsx)(a.A,{size:32,sx:{color:"white"}})}):E?(0,z.jsxs)(l.A,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{height:"100%"},children:[(0,z.jsx)(l.A,{children:(0,z.jsx)(c.A,{variant:"h2",color:"white",textAlign:"center",children:"Error fetching countries \ud83d\ude13"})}),(0,z.jsx)(l.A,{children:(0,z.jsx)(d.A,{variant:"outlined",startIcon:(0,z.jsx)(h.A,{}),onClick:()=>b(),sx:{color:"white",borderColor:"white"},children:"Try again"})})]}):n&&i&&0===C.length?(0,z.jsx)(l.A,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{height:"100%"},children:(0,z.jsx)(l.A,{children:(0,z.jsx)(c.A,{variant:"h2",color:"white",textAlign:"center",children:"No matches found for your search \ud83d\ude13"})})}):(0,z.jsxs)(l.A,{container:!0,spacing:2,columns:{xs:6,sm:6,md:12,lg:12,xl:16},children:[C.slice(0,s).map(e=>(0,z.jsx)(l.A,{size:{xs:6,sm:6,md:6,lg:4,xl:4},children:(0,z.jsx)(F,{flag:e.emoji,name:e.name,capital:e.capital,code:e.code,continent:e.continent.name,phone:e.phone,currency:e.currency,languages:e.languages.map(e=>e.native)})},e.code)),p&&(0,z.jsx)(l.A,{sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,z.jsx)(a.A,{size:24,sx:{color:"white"}})})]})})};var J=t(2579),N=t(6164),T=t(8315),_=t(3745);const q=e=>{let{searchMode:n,setSearchMode:t,onSearch:r,searchLoading:o,setHasSearchBeenSubmitted:i}=e;const[s,c]=(0,g.useState)(""),l=(0,g.useRef)(null);(0,g.useEffect)(()=>{n&&l.current&&l.current.focus()},[n]);const h=()=>{c(""),t(null),i(!1)},x=e=>{e.preventDefault();const t=s.trim();if(!t||!n)return;i(!0);const o="name"===n?{name:{regex:".*".concat((c=t,c.trim().split(/\s+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")),".*")}}:{code:{regex:"^".concat(t.toUpperCase(),"$")}};var c;r({variables:o})};return(0,z.jsx)(u.A,{component:"div",elevation:3,sx:{width:"100%",p:2,display:"flex",alignItems:"center",borderRadius:2,backgroundColor:"rgba(20, 28, 48, 0.95)"},children:n?(0,z.jsxs)(u.A,{component:"form",onSubmit:x,elevation:0,sx:{width:"100%",background:"transparent",display:"flex",alignItems:"center"},children:[(0,z.jsx)(J.A,{onClick:h,sx:{color:"white"},children:(0,z.jsx)(T.A,{})}),(0,z.jsx)(N.A,{inputRef:l,variant:"standard",placeholder:"Enter country ".concat(n," and press Enter"),autoComplete:"off",value:s,onChange:e=>c(e.target.value),fullWidth:!0,InputProps:{disableUnderline:!0,sx:{color:"white"}},sx:{mx:2,flex:1}}),(0,z.jsx)(J.A,{type:"submit",sx:{color:"white"},disabled:o,children:o?(0,z.jsx)(a.A,{size:24,sx:{color:"white"}}):(0,z.jsx)(_.A,{})})]}):(0,z.jsx)(y.A,{direction:"row",spacing:2,justifyContent:"center",sx:{width:"100%"},children:["name","code"].map(e=>(0,z.jsxs)(d.A,{variant:"outlined",onClick:()=>t(e),sx:{flex:1,color:"white",borderColor:"white",py:1},children:["Search by country ",e]},e))})})};var G=t(5303);const U=function(){var e,n,t,r,o;const[i,s]=(0,g.useState)(null),[l,a]=(0,g.useState)(!1),[d,u]=(0,G._)(f),[h,x]=(0,G._)(A),m={name:{trigger:d,result:u},code:{trigger:h,result:x}},p=(0,g.useMemo)(()=>i?m[i]:null,[i,m]);return(0,z.jsxs)("div",{className:"background-overlay",children:[(0,z.jsx)(c.A,{component:"h1",variant:"h1",sx:{display:"none"},children:"Countries Explorer \u2014 a simple way to search, filter and learn about countries, their capitals, currencies and more."}),(0,z.jsx)(q,{searchMode:i,setSearchMode:s,onSearch:null!==(e=null===p||void 0===p?void 0:p.trigger)&&void 0!==e?e:()=>{},searchLoading:null!==(n=null===p||void 0===p?void 0:p.result.loading)&&void 0!==n&&n,setHasSearchBeenSubmitted:a}),(0,z.jsx)(H,{searchMode:i,hasSearchBeenSubmitted:l,searchData:null!==(t=null===p||void 0===p?void 0:p.result.data)&&void 0!==t?t:null,searchLoading:null!==(r=null===p||void 0===p?void 0:p.result.loading)&&void 0!==r&&r,searchError:null!==(o=null===p||void 0===p?void 0:p.result.error)&&void 0!==o?o:null})]})}}}]);
//# sourceMappingURL=624.47f364c2.chunk.js.map
"use strict";(self.webpackChunkexode_countries=self.webpackChunkexode_countries||[]).push([[580],{7580:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var r=t(5895),o=t(5043);var s,i=t(4799),c=t(172),l=t(3089),a=t(2097),d=t(9302),u=t(4082),x=t(7528);const h=(0,t(459).J1)(s||(s=(0,x.A)(["\n  query {\n    countries {\n      code\n      name\n      phone\n      capital\n      currency\n      languages {\n        native\n      }\n      continent {\n        name\n      }\n      emoji\n    }\n  }\n"])));var f=t(298),j=t(267),g=t(1244),m=t(7240),p=t(6128),v=t(5156),w=t(4309),A=t(2327),y=t(3241),b=t(8295),C=t(6035),k=t(579);const E=e=>{let{icon:n,text:t}=e;return(0,k.jsxs)(f.A,{direction:"row",spacing:1,alignItems:"center",children:[n,(0,k.jsx)(r.A,{variant:"body1",children:t||"Not found"})]})},S=(e,n)=>{if(e.length<=n)return e;const t=e.split(" ");let r="";for(const o of t){if((r+" "+o).trim().length>n)break;r+=(r?" ":"")+o}return r.trim()+"..."},M=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e.length<=n?e.join("/"):"".concat(e.slice(0,n).join("/"),"...")},I=e=>{let{flag:n,name:t,continent:s,code:i,capital:c,phone:l,currency:a,languages:d}=e;const u=(0,j.A)(),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:900;const[n,t]=(0,o.useState)("undefined"===typeof window||window.innerWidth>e);return(0,o.useEffect)(()=>{const n=()=>t(window.innerWidth>e);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),n}();return(0,k.jsxs)(g.A,{sx:{width:"100%",backgroundColor:"white",borderRadius:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,k.jsx)(m.A,{title:(0,k.jsxs)(r.A,{variant:"h2",component:"div",title:"".concat(n," ").concat(t),children:[n," ",x?S(t,22):t]}),sx:{borderBottom:"1px solid ".concat(u.palette.divider),pb:1,mb:1}}),(0,k.jsx)(p.A,{sx:{pt:0},children:(0,k.jsxs)(f.A,{spacing:1.2,children:[(0,k.jsx)(E,{icon:(0,k.jsx)(v.A,{sx:{color:"gray"}}),text:s}),(0,k.jsx)(E,{icon:(0,k.jsx)(w.A,{sx:{color:"gray"}}),text:c}),(0,k.jsx)(E,{icon:(0,k.jsx)(A.A,{sx:{color:"gray"}}),text:i}),(0,k.jsx)(E,{icon:(0,k.jsx)(y.A,{sx:{color:"gray"}}),text:l&&"+".concat(l)}),(0,k.jsx)(E,{icon:(0,k.jsx)(b.A,{sx:{color:"gray"}}),text:a}),(0,k.jsx)(E,{icon:(0,k.jsx)(C.A,{sx:{color:"gray"}}),text:(0,k.jsx)("span",{title:d.join(" / "),children:M(d)})})]})})]})},L=e=>{let{filter:n,mode:t}=e;const[s,x]=(0,o.useState)([]),[f,j]=(0,o.useState)(9),[g,m]=(0,o.useState)(!1),p=(0,o.useRef)(null),{data:v,loading:w,error:A,refetch:y}=(0,u.IT)(h);(0,o.useEffect)(()=>{null!==v&&void 0!==v&&v.countries&&x(v.countries)},[v]);const b=(0,o.useMemo)(()=>{if(!n.trim()||!t)return s;const e=n.toLowerCase();return s.filter(n=>"name"===t?n.name.toLowerCase().includes(e):n.code.toLowerCase().includes(e))},[s,n,t]),C=(0,o.useCallback)(()=>{const e=p.current;if(!e||g)return;const{scrollTop:n,scrollHeight:t,clientHeight:r}=e;n+r>=t-200&&f<b.length&&(m(!0),setTimeout(()=>{j(e=>Math.min(e+6,b.length)),m(!1)},250))},[g,f,b.length]);return(0,o.useEffect)(()=>{const e=p.current;if(e)return e.addEventListener("scroll",C),()=>e.removeEventListener("scroll",C)},[C]),(0,k.jsxs)(i.A,{component:"section",elevation:3,ref:p,sx:{p:2,width:"100%",height:"100%",borderRadius:2,backgroundColor:"rgba(20, 28, 48, 0.95)",overflowY:"scroll",position:w?"relative":"static"},children:[w&&(0,k.jsx)(c.A,{size:32,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white"}}),!w&&A&&(0,k.jsxs)(l.A,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{height:"100%"},children:[(0,k.jsx)(l.A,{children:(0,k.jsx)(r.A,{variant:"h2",color:"white",textAlign:"center",children:"Error fetching countries \ud83d\ude13"})}),(0,k.jsx)(l.A,{children:(0,k.jsx)(a.A,{variant:"outlined",startIcon:(0,k.jsx)(d.A,{}),onClick:()=>y(),sx:{color:"white",borderColor:"white"},children:"Try again"})})]}),!w&&!A&&(0,k.jsxs)(l.A,{container:!0,spacing:2,columns:{xs:6,sm:6,md:12,lg:12,xl:16},children:[b.slice(0,f).map(e=>(0,k.jsx)(l.A,{size:{xs:6,sm:6,md:6,lg:4,xl:4},children:(0,k.jsx)(I,{flag:e.emoji,name:e.name,capital:e.capital,code:e.code,continent:e.continent.name,phone:e.phone,currency:e.currency,languages:e.languages.map(e=>e.native)})},e.code)),g&&(0,k.jsx)(l.A,{sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,k.jsx)(c.A,{size:24,sx:{color:"white"}})})]})]})};var R=t(2579),V=t(6164),z=t(8315);const T=e=>{let{value:n,setValue:t,mode:r,setMode:s}=e;const c=(0,o.useRef)(null);(0,o.useEffect)(()=>{r&&c.current&&c.current.focus()},[r]);return(0,k.jsx)(i.A,{component:"div",elevation:3,sx:{width:"100%",p:2,display:"flex",alignItems:"center",borderRadius:2,backgroundColor:"rgba(20, 28, 48, 0.95)"},children:r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(R.A,{onClick:()=>s(null),sx:{color:"white"},children:(0,k.jsx)(z.A,{})}),(0,k.jsx)(V.A,{inputRef:c,variant:"standard",placeholder:"Enter country ".concat(r),autoComplete:"off",value:n,onChange:e=>t(e.target.value),InputProps:{disableUnderline:!0,sx:{color:"white"}},sx:{ml:2,flex:1}})]}):(0,k.jsx)(f.A,{direction:"row",spacing:2,justifyContent:"center",sx:{width:"100%"},children:["name","code"].map(e=>(0,k.jsxs)(a.A,{variant:"outlined",onClick:()=>s(e),sx:{flex:1,color:"white",borderColor:"white",py:1},children:["Search by country ",e]},e))})})};const F=function(){const{searchValue:e,setSearchValue:n,filterMode:t,setFilterMode:s}=(()=>{const[e,n]=(0,o.useState)(""),[t,r]=(0,o.useState)(null);return{searchValue:e,setSearchValue:n,filterMode:t,setFilterMode:r}})();return(0,k.jsxs)("div",{className:"background-overlay",children:[(0,k.jsx)(r.A,{component:"h1",variant:"h1",sx:{display:"none"},children:"Countries Explorer \u2014 a simple way to search, filter and learn about countries, their capitals, currencies and more."}),(0,k.jsx)(T,{value:e,setValue:n,mode:t,setMode:s}),(0,k.jsx)(L,{filter:e,mode:t})]})}}}]);
//# sourceMappingURL=580.abf91aaf.chunk.js.map